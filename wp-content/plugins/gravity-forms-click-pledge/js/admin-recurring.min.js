/*!
WordPress plugin gravityforms-cnp
form editor for Recurring Payments field
*//*a("#openfild_div").hide();a("#fixdnumber_div").hide();*/

;var GFCnpRecurring=(function(a){return{SetFieldLabel:function(d,b){var c=d.value;if(!(/\S/.test(c))){c=b}a("."+d.id).text(c);SetFieldProperty(d.id,c)},

ToggleInitialSetting:function(b){SetFieldProperty(b.id,b.checked);if(b.checked){a("#gfcnp_initial_fields").slideDown()}else{a("#gfcnp_initial_fields").slideUp()}},

ToggleSubscriptionSetting:function(b){SetFieldProperty(b.id,b.checked);if(b.checked){a('input[name="gfcnp_numberofpayments"]').prop('checked', false);a("#indefinite_div").show();a("#indefinite_openfield_div").show();if(jQuery("#gfcnp_recurringtype_installment").is(':checked') && jQuery("#gfcnp_recurringtype_subscription").is(':checked')){a("tr.trdfltrecoptn").show();a("#trdfltrecoptn").show();}}else{a("#indefinite_div").hide();a("#indefinite_openfield_div").hide();a('input[name="gfcnp_numberofpayments"]').prop('checked', false);a("#gfcnp_dfltnoofpaymnts").val('');SetFieldProperty('gfcnp_dfltnoofpaymnts','');a("#gfcnp_maxnoofinstallmentsallowed").val('');SetFieldProperty('gfcnp_maxnoofinstallmentsallowed','');a('#gfcnp_maxnoofinstallmentsallowed').attr('readonly', false); }a("tr.trdfltrecoptn").hide();},

ToggleInstallmentSetting:function(b){SetFieldProperty(b.id,b.checked);if(b.checked){a("#openfild_div").show();a("#fixdnumber_div").show();if(a("#gfcnp_recurringtype_subscription").is(':checked')){a("tr.trdfltrecoptn").show()}}else{a("tr.trdfltrecoptn").hide();}},



Togglenumberofpayments:function(b){SetFieldProperty(b.id,b.value);a("#gfcnp_dfltnoofpaymnts").val('');a("#gfcnp_maxnoofinstallmentsallowed").val('');SetFieldProperty('gfcnp_maxnoofinstallmentsallowed','');SetFieldProperty('gfcnp_dfltnoofpaymnts','');if(b.value == 'indefiniten'){a("tr.dfltnoofpaymnts").hide();a("tr.maxnoofinstlmnts").hide();}else{a("tr.dfltnoofpaymnts").show();a("tr.maxnoofinstlmnts").show();}if(b.value == 'indefinite_openfield'){a("#gfcnp_dfltnoofpaymnts").val('999');SetFieldProperty('gfcnp_dfltnoofpaymnts','999');a("#gfcnp_maxnoofinstallmentsallowed").val('999');SetFieldProperty('gfcnp_maxnoofinstallmentsallowed','999');  a('#gfcnp_maxnoofinstallmentsallowed').attr('readonly', true);}else{a('#gfcnp_maxnoofinstallmentsallowed').attr('readonly', false);}if(b.value == 'fixednumber'){a("tr.maxnoofinstlmnts").hide();}},

FieldSet:function(b){SetFieldProperty(b.id,b.value);},

FieldSet2:function(b){ SetFieldProperty(b.id,b.checked);if(b.checked){a("#gfcnp_dflt").append('<option value="' + b.value + '">' + b.value + '</option>');}else{ 
a('#gfcnp_dflt option[value="' + b.value + '"]').remove();}},

FieldSet3:function(b){ SetFieldProperty(b.id,b.checked);if(b.checked){a("tr.trdfltpymntoptn").show();a("select#gfcnp_dfltpayoptn option[value='One Time Only']").attr("selected", true);SetFieldProperty('gfcnp_dfltpayoptn','One Time Only');a('#txtsku_onetime').attr('readonly', false);}else{a("select#gfcnp_dfltpayoptn option[value='Recurring']").attr("selected", true);SetFieldProperty('gfcnp_dfltpayoptn','Recurring');a("tr.trdfltpymntoptn").hide();a('#txtsku_onetime').attr('readonly', true);}},

FieldSet5:function(b,e){ if(b.checked){  a("#"+e).attr('readonly', false);}else{ 
 a("#"+e).attr('readonly', true);}},
/* Starting of rec option*/

ToggleoSubscriptionSetting:function(b){SetFieldProperty(b.id,b.checked);if(b.checked){a("#maxrecurrings_Subscription_label").show()}else{a("#maxrecurrings_Subscription_label").hide()}},
ToggleoInstallmentSetting:function(b){SetFieldProperty(b.id,b.checked);if(b.checked){a("#maxrecurrings_Installment_label").show()}else{a("#maxrecurrings_Installment_label").hide()}},
FieldSet4:function(b){ SetFieldProperty(b.id,b.checked); },
/* End of rec options*/
ToggleRecurringDateSetting:function(b){SetFieldProperty(b.id,b.checked);}}})(jQuery);




jQuery("form").submit(function(){


	if(jQuery('#gfcnp_Week_setting').length > 0)
	{
		if(jQuery('#gfcnp_Week_setting').is(':visible'))
		{
			var selected = 0;
		
			if(jQuery("#gfcnp_Week_setting").prop('checked')) selected++;
			if(jQuery("#gfcnp_2_Weeks_setting").prop('checked')) selected++;
			if(jQuery("#gfcnp_Month_setting").prop('checked')) selected++;
			if(jQuery("#gfcnp_2_Months_setting").prop('checked')) selected++;
			if(jQuery("#gfcnp_Quarter_setting").prop('checked')) selected++;
			if(jQuery("#gfcnp_6_Months_setting").prop('checked')) selected++;
			if(jQuery("#gfcnp_Year_setting").prop('checked')) selected++;
			if(selected == 0) {
				alert('Please select at least one period');
				jQuery("#gfcnp_Week_setting").focus();
				return false;
			}
			if(jQuery('#Installment').is(':visible') && jQuery('#Subscription').is(':visible'))
			{
				var selected4 = 0;
				if(jQuery("#Installment").prop('checked')) selected4++;
				if(jQuery("#Subscription").prop('checked')) selected4++;
				if(selected4 == 0) {
					alert('Please select at least one recurring method');
					jQuery("#Installment").focus();
					return false;
				}
			}
		}
		
		if(jQuery('#gfcnp_recurringtype_subscription').is(':visible') && jQuery('#gfcnp_recurringtype_installment').is(':visible'))		{
			var selected2 = 0;
			if(jQuery("#gfcnp_recurringtype_subscription").prop('checked')) selected2++;
			if(jQuery("#gfcnp_recurringtype_installment").prop('checked')) selected2++;
		
			if(selected2 == 0) {
				alert('Please select at least one recurring type');
				jQuery("#gfcnp_recurringtype_installment").focus();
				return false;
			}
			
			if(jQuery('input[name=gfcnp_numberofpayments]:checked').length<=0)
				{
				   alert("Please select at least one option for number of payments");
				   jQuery("#gfcnp_numberofpayments").focus();
				   return false;
				}
			
			if(jQuery('input[name=gfcnp_numberofpayments]:checked').val() != "indefiniten")
			{
			
				if(jQuery('#gfcnp_dfltnoofpaymnts').val() == "" && jQuery('input[name=gfcnp_numberofpayments]:checked').val() == "fixednumber")
				{
				   alert("Please enter default number of payments");
				   jQuery("#gfcnp_dfltnoofpaymnts").focus();
				   return false;														
				}
				if(jQuery('#gfcnp_dfltnoofpaymnts').val() != "" && jQuery('#gfcnp_dfltnoofpaymnts').val() <= 1)
				{
				   alert("Please enter default number of payments value grater than 1");
				   jQuery("#gfcnp_dfltnoofpaymnts").focus();
				   return false;														
				}
				if(!isInteger(jQuery('#gfcnp_dfltnoofpaymnts').val()) && jQuery('#gfcnp_dfltnoofpaymnts').val() != "" )
				{
				   alert("Please enter an integer value only");
				   jQuery("#gfcnp_dfltnoofpaymnts").focus();
				   return false;														
				}
				if(jQuery('#gfcnp_maxnoofinstallmentsallowed').val() != "" && jQuery('#gfcnp_maxnoofinstallmentsallowed').val() <=1)
				{
				   alert("Please enter maximum number of installments allowed value grater than 1");
				   jQuery("#gfcnp_maxnoofinstallmentsallowed").focus();
				   return false;														
				}
				if(parseInt(jQuery('#gfcnp_maxnoofinstallmentsallowed').val()) < parseInt(jQuery('#gfcnp_dfltnoofpaymnts').val()))
				{
					alert("Default number of payments should be less than or equal to maximum number of installments allowed");
					jQuery('#gfcnp_dfltnoofpaymnts').focus();
					return false;
				}
				if(!isInteger(jQuery('#gfcnp_maxnoofinstallmentsallowed').val()) && jQuery('#gfcnp_maxnoofinstallmentsallowed').val() != "" )
				{
				   alert("Please enter an integer value only");
				   jQuery("#gfcnp_maxnoofinstallmentsallowed").focus();
				   return false;														
				}
				if(jQuery(gfcnp_recurringtype_installment).is(':checked') && !jQuery(gfcnp_recurringtype_subscription).is(':checked'))
				{
					
					if(jQuery('#gfcnp_dfltnoofpaymnts').val() !=""  && jQuery('#gfcnp_dfltnoofpaymnts').val() > 998 && jQuery('tr.dfltnoofpaymnts').css('display') != 'none')
					{
						   alert("Please enter value between 2 to 998 for installment");
						   jQuery("#gfcnp_dfltnoofpaymnts").focus();
						   return false;
					}
					if(jQuery('#gfcnp_maxnoofinstallmentsallowed').val() !=""  && jQuery('#gfcnp_maxnoofinstallmentsallowed').val() > 998 && jQuery('tr.maxnoofinstlmnts').css('display') != 'none')
					{
						   alert("Please enter value between 2 to 998 for installment");
						   jQuery("#gfcnp_maxnoofinstallmentsallowed").focus();
						   return false;
					}
				}
				else if(jQuery(gfcnp_recurringtype_installment).is(':checked') && jQuery(gfcnp_recurringtype_subscription).is(':checked'))
				{
					
					if(jQuery('#gfcnp_dfltrectypoptn').val() == "Installment" && jQuery('#gfcnp_dfltnoofpaymnts').val() > 998 && 
					   jQuery('tr.dfltnoofpaymnts').css('display') != 'none' && jQuery('input[name=gfcnp_numberofpayments]:checked').val() != "indefinite_openfield" )
					{
						 alert("Please enter value between 2 to 998 for installment");
						   jQuery("#gfcnp_dfltnoofpaymnts").focus();
						   return false;
					}
					if(jQuery('#gfcnp_dfltrectypoptn').val() == "Installment" && jQuery('#gfcnp_maxnoofinstallmentsallowed').val() > 998 &&
					   jQuery('tr.gfcnp_maxnoofinstallmentsallowed').css('display') != 'none' && jQuery('input[name=gfcnp_numberofpayments]:checked').val() != "indefinite_openfield")
					{
						  alert("Please enter value between 2 to 998 for installment");
						   jQuery("#gfcnp_maxnoofinstallmentsallowed").focus();
						   return false;
					}
				}
				
			}
		}
	}

});

jQuery(function(a){fieldSettings.gfcnprecurring=".conditional_logic_field_setting, .error_message_setting, .label_setting, .admin_label_setting, .rules_setting, .description_setting, .css_class_setting, .gfcnprecurring_setting";

a(document).bind("gform_load_field_settings",function(c,d,b){
var first_load = true;
if(typeof(d.gfcnp_label_isthisrecurring) != 'undefined') {first_load = false;}
if(typeof(d.gfcnp_label_periods) != 'undefined') {first_load = false;}
if(typeof(d.gfcnp_label_installments) != 'undefined') {first_load = false;}
if(typeof(d.gfcnp_label_RecurringMethod) != 'undefined') {first_load = false;}
if(typeof(d.gfcnp_label_IndefiniteRecurring) != 'undefined') {first_load = false;}

if(typeof(d.Subscription) != 'undefined'){ first_load = false;}
if(typeof(d.Installment) != 'undefined'){ first_load = false;}
if(typeof(d.indefinite) != 'undefined') { first_load = false;}


if(typeof(d.gfcnp_periodicity) != 'undefined' ) {first_load = false;}
if(typeof(d.gfcnp_dfltnoofpaymentslbl) != 'undefined' ){ first_load = false;}
if(typeof(d.gfcnp_maxnoofinstallments) != 'undefined') {first_load = false;}

if(typeof(d.gfcnp_One_Time_Only_setting) != 'undefined') { first_load = false;}
if(typeof(d.gfcnp_Week_setting) != 'undefined') { first_load = false;}
if(typeof(d.gfcnp_2_Weeks_setting) != 'undefined') { first_load = false;}
if(typeof(d.gfcnp_Month_setting) != 'undefined') {  first_load = false;}
if(typeof(d.gfcnp_2_Months_setting) != 'undefined') { first_load = false;}
if(typeof(d.gfcnp_Quarter_setting) != 'undefined') {  first_load = false;}
if(typeof(d.gfcnp_6_Months_setting) != 'undefined') { first_load = false;}
if(typeof(d.gfcnp_Year_setting) != 'undefined') { first_load = false;}

if(typeof(d.txtsku_onetime) != 'undefined') { first_load = false;}
if(typeof(d.txtsku_week) != 'undefined') { first_load = false;}
if(typeof(d.txtsku_tweeks) != 'undefined') { first_load = false;}
if(typeof(d.txtsku_month) != 'undefined') {  first_load = false;}
if(typeof(d.txtsku_tmonth) != 'undefined') { first_load = false;}
if(typeof(d.txtsku_quarter) != 'undefined') {  first_load = false;}
if(typeof(d.txtsku_smonths) != 'undefined') { first_load = false;}
if(typeof(d.txtsku_year) != 'undefined') { first_load = false;}


if(typeof(d.gfcnp_recurringtype_subscription) != 'undefined'){ first_load = false;}
if(typeof(d.gfcnp_recurringtype_installment) != 'undefined'){ first_load = false;}
if(typeof(d.indefiniten) != 'undefined') { first_load = false;}

if(first_load)
{	

    SetFieldProperty('gfcnp_label_isthisrecurring', a('#gfcnp_label_isthisrecurring').val());
	SetFieldProperty('gfcnp_label_periods', a('#gfcnp_label_periods').val());
	SetFieldProperty('gfcnp_label_installments', a('#gfcnp_label_installments').val());
	SetFieldProperty('gfcnp_label_RecurringMethod', a('#gfcnp_label_RecurringMethod').val());
	SetFieldProperty('gfcnp_label_IndefiniteRecurring', a('#gfcnp_label_IndefiniteRecurring').val());
	
	SetFieldProperty('gfcnp_maxrecurrings_Installment', a('#gfcnp_maxrecurrings_Installment').val());
	SetFieldProperty('gfcnp_maxrecurrings_Subscription', a('#gfcnp_maxrecurrings_Subscription').val());
	
	SetFieldProperty('Subscription', true);
	SetFieldProperty('Installment', true);
	SetFieldProperty('indefinite', false);
	
	a("#Subscription").prop('checked', true);
	a("#Installment").prop('checked', true);
	a("#maxrecurrings_Subscription_label").show();
	a("#maxrecurrings_Installment_label").show();
	
	
	SetFieldProperty('gfcnp_payoptn', a('#gfcnp_payoptn').val());
	SetFieldProperty('gfcnp_rectype', a('#gfcnp_rectype').val());
	SetFieldProperty('gfcnp_periodicity', a('#gfcnp_periodicity').val());
	SetFieldProperty('gfcnp_noofpayments', a('#gfcnp_noofpayments').val());
	SetFieldProperty('gfcnp_dfltnoofpaymentslbl', a('#gfcnp_dfltnoofpaymentslbl').val());
	SetFieldProperty('gfcnp_maxnoofinstallments', a('#gfcnp_maxnoofinstallments').val());
	

	if (a("#gfcnp_payoptns_onetimeonly").prop('checked')==true){a('tr.dvrecurtyp').show();a("#gfcnp_payoptns_onetimeonly").prop('checked', false);a('#txtsku_onetime').attr('readonly', false);}
	else{a("tr.trdfltpymntoptn").hide();a('#txtsku_onetime').attr('readonly', true);}
	
	SetFieldProperty('txtsku_onetime', a('#txtsku_onetime').val());
	SetFieldProperty('txtsku_week', a('#txtsku_week').val());
	SetFieldProperty('txtsku_tweeks',  a('#txtsku_tweeks').val());
	SetFieldProperty('txtsku_month',  a('#txtsku_month').val());
	SetFieldProperty('txtsku_tmonth',  a('#txtsku_tmonth').val());
	SetFieldProperty('txtsku_quarter',  a('#txtsku_quarter').val());
	SetFieldProperty('txtsku_smonths',  a('#txtsku_smonths').val());
	SetFieldProperty('txtsku_year',  a('#txtsku_year').val());
	
	
	
	SetFieldProperty('gfcnp_dfltpayoptn','Recurring');
	SetFieldProperty('gfcnp_Week_setting', true);
	SetFieldProperty('gfcnp_2_Weeks_setting', true);
	SetFieldProperty('gfcnp_Month_setting', true);
	SetFieldProperty('gfcnp_2_Months_setting', true);
	SetFieldProperty('gfcnp_Quarter_setting', true);
	SetFieldProperty('gfcnp_6_Months_setting', true);
	SetFieldProperty('gfcnp_Year_setting', true);
	SetFieldProperty('gfcnp_numberofpayments', 'openfield');
	
	
	SetFieldProperty('gfcnp_recurringtype_subscription', true);
	SetFieldProperty('gfcnp_recurringtype_installment', true);
	SetFieldProperty('indefiniten', false);
	
	a("#gfcnp_recurringtype_subscription").prop('checked', true);
	a("#gfcnp_recurringtype_installment").prop('checked', true);
	
	a("#maxrecurrings_Subscription_label").show();
	a("#maxrecurrings_Installment_label").show();
	

	a("#gfcnp_Week_setting").prop('checked', true);
	a("#gfcnp_2_Weeks_setting").prop('checked', true);
	a("#gfcnp_Month_setting").prop('checked', true);
	a("#gfcnp_2_Months_setting").prop('checked', true);
	a("#gfcnp_Quarter_setting").prop('checked', true);
	a("#gfcnp_6_Months_setting").prop('checked', true);
	a("#gfcnp_Year_setting").prop('checked', true);
	a("input[name=gfcnp_numberofpayments][value='openfield']").prop("checked",true);
}
//console.log(d);
if(!first_load)
{
	a("#gfcnp_label_isthisrecurring").val('');
	a("#gfcnp_label_periods").val('');
	a("#gfcnp_label_installments").val('');
	a("#gfcnp_label_RecurringMethod").val('');
	a("#gfcnp_label_IndefiniteRecurring").val('');
	
	a("#gfcnp_maxrecurrings_Installment").val('');
	a("#gfcnp_maxrecurrings_Subscription").val('');

    a("#gfcnp_label_isthisrecurring").val(d.gfcnp_label_isthisrecurring);
	a("#gfcnp_label_periods").val(d.gfcnp_label_periods);
	a("#gfcnp_label_installments").val(d.gfcnp_label_installments);
	a("#gfcnp_label_RecurringMethod").val(d.gfcnp_label_RecurringMethod);
	a("#gfcnp_label_IndefiniteRecurring").val(d.gfcnp_label_IndefiniteRecurring);
	
	a("#gfcnp_maxrecurrings_Installment").val(d.gfcnp_maxrecurrings_Installment);
	a("#gfcnp_maxrecurrings_Subscription").val(d.gfcnp_maxrecurrings_Subscription);


	if(d.Subscription == '1')
	{
	a("#Subscription").prop('checked', true);
	a("#maxrecurrings_Subscription_label").show();
	a("#gfcnp_maxrecurrings_Subscription").val(d.gfcnp_maxrecurrings_Subscription);
	}
	if(d.Installment == '1')
	{
	a("#Installment").prop('checked', true);
	a("#maxrecurrings_Installment_label").show();
	a("#gfcnp_maxrecurrings_Installment").val(d.gfcnp_maxrecurrings_Installment);
	}

	if(d.indefinite == '1')
	{
	a("#indefinite").prop('checked', true);
	}
	a("#gfcnp_Week_setting").prop('checked', false);
	a("#gfcnp_2_Weeks_setting").prop('checked', false);
	a("#gfcnp_Month_setting").prop('checked', false);
	a("#gfcnp_2_Months_setting").prop('checked', false);
	a("#gfcnp_Quarter_setting").prop('checked', false);
	a("#gfcnp_6_Months_setting").prop('checked', false);
	a("#gfcnp_Year_setting").prop('checked', false);
	
	
	//Assign values
	a("#gfcnp_payoptn").val(d.gfcnp_payoptn);
	a("#gfcnp_rectype").val(d.gfcnp_rectype);
	a("#gfcnp_periodicity").val(d.gfcnp_periodicity);
	a("#gfcnp_noofpayments").val(d.gfcnp_noofpayments);
	a("#gfcnp_dfltnoofpaymentslbl").val(d.gfcnp_dfltnoofpaymentslbl);
	a("#gfcnp_maxnoofinstallments").val(d.gfcnp_maxnoofinstallments);
	a("#gfcnp_dfltrectypoptn").val(d.gfcnp_dfltrectypoptn);
	a("#gfcnp_dfltpayoptn").val(d.gfcnp_dfltpayoptn);
	
	
	a('#txtsku_onetime').val(d.txtsku_onetime);
	a('#txtsku_week').val(d.txtsku_week);
	a('#txtsku_tweeks').val(d.txtsku_tweeks);
	a('#txtsku_month').val(d.txtsku_month);
	a('#txtsku_tmonth').val(d.txtsku_tmonth);
	a('#txtsku_quarter').val(d.txtsku_quarter);
	a('#txtsku_smonths').val(d.txtsku_smonths);
	a('#txtsku_year').val(d.txtsku_year);
	
	a("#gfcnp_dfltnoofpaymnts").val(d.gfcnp_dfltnoofpaymnts);
	a("#gfcnp_maxnoofinstallmentsallowed").val(d.gfcnp_maxnoofinstallmentsallowed);
	
	a("#gfcnp_maxrecurrings_Installment").val(d.gfcnp_maxrecurrings_Installment);
	a("#gfcnp_maxrecurrings_Subscription").val(d.gfcnp_maxrecurrings_Subscription);

	
	if(d.gfcnp_numberofpayments == 'indefiniten') { a("#gfcnp_numberofpayments").prop('checked', true);}
	
	if(d.gfcnp_recurringtype_subscription == '1' && d.gfcnp_recurringtype_installment == '1')
	{a("tr.trdfltrecoptn").show()}else{a("tr.trdfltrecoptn").hide();}
	if(d.gfcnp_payoptns_onetimeonly == '1') {a('tr.dvrecurtyp').show();a("#gfcnp_payoptns_onetimeonly").prop('checked', true);a('#txtsku_onetime').attr('readonly', false);}
	else{a("tr.trdfltpymntoptn").hide();a('#txtsku_onetime').attr('readonly', true);}
	if(d.gfcnp_Week_setting == '1') { a("#gfcnp_Week_setting").prop('checked', true);}
	if(d.gfcnp_2_Weeks_setting == '1') { a("#gfcnp_2_Weeks_setting").prop('checked', true); }
	if(d.gfcnp_Month_setting == '1') { a("#gfcnp_Month_setting").prop('checked', true);}
	if(d.gfcnp_2_Months_setting == '1') { a("#gfcnp_2_Months_setting").prop('checked', true);}
	if(d.gfcnp_Quarter_setting == '1') { a("#gfcnp_Quarter_setting").prop('checked', true);}
	if(d.gfcnp_6_Months_setting == '1') { a("#gfcnp_6_Months_setting").prop('checked', true);}
	if(d.gfcnp_Year_setting == '1') { a("#gfcnp_Year_setting").prop('checked', true); }
	hideSKUSuffix('#gfcnp_Week_setting','#txtsku_week');
	hideSKUSuffix('#gfcnp_2_Weeks_setting','#txtsku_tweeks');
	hideSKUSuffix('#gfcnp_Month_setting','#txtsku_month');
	hideSKUSuffix('#gfcnp_2_Months_setting','#txtsku_tmonth');
	hideSKUSuffix('#gfcnp_Quarter_setting','#txtsku_quarter');
	hideSKUSuffix('#gfcnp_6_Months_setting','#txtsku_smonths');
	hideSKUSuffix('#gfcnp_Year_setting','#txtsku_year');
	
	a("input[name=gfcnp_numberofpayments][value='" +d.gfcnp_numberofpayments + "']").attr('checked', 'checked');
	

	if(d.gfcnp_dfltpayoptn == 'undefined')
	{
		a("#gfcnp_dfltpayoptn option[value='Recurring']").prop("selected", true);
	}
	else
	{
		a("#gfcnp_dfltpayoptn option[value='"+d.gfcnp_dfltpayoptn+"']").prop("selected", true);
	}

	
	
	if(d.gfcnp_numberofpayments == "indefiniten"){a("tr.dfltnoofpaymnts").hide();a("tr.maxnoofinstlmnts").hide();}
	else{a("tr.dfltnoofpaymnts").show();a("tr.maxnoofinstlmnts").show();}
	
	if(d.gfcnp_numberofpayments == "fixednumber"){a("tr.maxnoofinstlmnts").hide();}
	if(d.gfcnp_numberofpayments == "indefinite_openfield"){a('#gfcnp_maxnoofinstallmentsallowed').attr('readonly', true);}else{a('#gfcnp_maxnoofinstallmentsallowed').attr('readonly', false);}
	if(d.gfcnp_recurringtype_subscription == '1')
	{
		a("#gfcnp_recurringtype_subscription").prop('checked', true);
		a("#maxrecurrings_Subscription_label").show();
		a("#gfcnp_maxrecurrings_Subscription").val(d.gfcnp_maxrecurrings_Subscription);
		a("#indefinite_div").show();a("#indefinite_openfield_div").show();a("#openfild_div").show();a("#fixdnumber_div").show();
	}
	else
	{
		a("#indefinite_div").hide();a("#indefinite_openfield_div").hide();
	}
	if(d.gfcnp_recurringtype_installment == '1')
	{
	a("#gfcnp_recurringtype_installment").prop('checked', true);
	a("#maxrecurrings_Installment_label").show();
	a("#gfcnp_maxrecurrings_Installment").val(d.gfcnp_maxrecurrings_Installment);
	a("#openfild_div").show();a("#fixdnumber_div").show();
	}
	
	if(d.indefiniten == '1')
	{
	a("#indefinite").prop('checked', true);
	}
}

a("#gfcnp_initial_setting").prop("checked",!!d.gfcnp_initial_setting);

if(!d.gfcnp_initial_setting){a("#gfcnp_initial_fields").hide()}

a("#gfcnp_recurring_date_setting").prop("checked",!!d.gfcnp_recurring_date_setting);

if(!d.gfcnp_recurring_date_setting){a("#gfcnp_recurring_date_fields").hide()}a("#gfcnp_initial_amount_label").val(d.gfcnp_initial_amount_label);a("#gfcnp_recurring_amount_label").val(d.gfcnp_recurring_amount_label);a("#gfcnp_initial_date_label").val(d.gfcnp_initial_date_label);a("#gfcnp_start_date_label").val(d.gfcnp_start_date_label);a("#gfcnp_end_date_label").val(d.gfcnp_end_date_label);a("#gfcnp_interval_type_label").val(d.gfcnp_interval_type_label)})});

//Duplicate field checking
function StartAddField_cnp(type, index) {
	
	switch (type) {
			case "gfcnprecurring" :
				if (GetFieldsByType(["gfcnprecurring"]).length > 0) {
					alert("Only one recurring field can be added to the form");
					return false;
				}
			break;
			case "gfcnpecheck" :
				if(GetFieldsByType(["gfcnpecheck"]).length > 0){
					alert("Only one eCheck field can be added to the form");
					return false;
				}
			break;
			case "gfcnpcustompayment" :
			
				if(GetFieldsByType(["gfcnpcustompayment"]).length > 0){
					alert("Only one Custom Payment field can be added to the form");
					return false;
				}
			break;
			default :
				return true;
	}
	StartAddField(type, index);
}
 function isInteger(n) {
        return /^[0-9]+$/.test(n);
    }
	function hideSKUSuffix(chkid,skuid)
	{   
		if(jQuery(chkid). prop("checked") == true){
		jQuery(skuid).attr('readonly', false);
		}
		else
		{
			jQuery(skuid).attr('readonly', true);
		}
	}